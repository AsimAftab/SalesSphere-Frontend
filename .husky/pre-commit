export NODE_OPTIONS="--max-old-space-size=4096"

echo "üîç Running pre-commit checks..."

# 1. TypeScript check (catches casing issues, type errors, etc.)
echo "üì¶ Running TypeScript type check..."
if ! npx tsc -b --noEmit; then
  echo ""
  echo "‚ùå TypeScript check failed!"
  echo "   This includes file casing consistency checks."
  echo "   Fix the errors above, then commit again."
  echo "   To skip: git commit --no-verify"
  exit 1
fi

# 2. Lint-staged (ESLint, Prettier, etc.)
if npx lint-staged; then
  echo "‚úÖ All checks passed!"
else
  echo ""
  echo "‚ùå Pre-commit checks failed!"
  echo "   Fix the ESLint errors shown above, then stage and commit again."
  echo "   To skip this check (not recommended): git commit --no-verify"
  exit 1
fi
