export NODE_OPTIONS="--max-old-space-size=4096"

echo "ğŸ” Running pre-commit checks..."

# 1. Lint staged files
if ! npx lint-staged; then
  echo ""
  echo "âŒ ESLint check failed!"
  echo "   Fix the errors shown above, then stage and commit again."
  echo "   To skip this check (not recommended): git commit --no-verify"
  exit 1
fi

# 2. Type check (catches cross-file type breakages that lint misses)
echo "ğŸ” Running type check..."
if ! npx tsc -b --noEmit; then
  echo ""
  echo "âŒ Type check failed!"
  echo "   Fix the TypeScript errors shown above, then stage and commit again."
  echo "   To skip this check (not recommended): git commit --no-verify"
  exit 1
fi

echo "âœ… All pre-commit checks passed!"
